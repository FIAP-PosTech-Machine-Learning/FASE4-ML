import time
import psutil
import logging

# Configuração do logging
logging.basicConfig(filename='monitoring.log', level=logging.INFO)

def log_performance():
    """Registra o uso de CPU e memória a cada intervalo de tempo."""
    while True:
        cpu_usage = psutil.cpu_percent(interval=1)
        memory_info = psutil.virtual_memory()
        memory_usage = memory_info.percent
        
        logging.info(f'Tempo: {time.strftime("%Y-%m-%d %H:%M:%S")}, CPU: {cpu_usage}%, Memória: {memory_usage}%')
        time.sleep(60)  # Intervalo de 60 segundos entre os logs

if __name__ == "__main__":
    log_performance()